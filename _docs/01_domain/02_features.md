# 機能一覧

## フィーチャー構成とモデル対応

YattaDayアプリの`app/lib/features/`配下のフィーチャー構成とデータモデルの対応関係を定義します。

### 既存のコアフィーチャー（アンダースコア付き）

#### `_authentication/`

- **対応モデル**: `User`
- **責務**: Firebase認証（匿名/Google/Apple）
- **主要機能**: ログイン、ログアウト、アカウント作成

#### `_payment/`

- **対応モデル**: `User.isPremium`フィールド
- **責務**: RevenueCatを使用したサブスクリプション管理
- **主要機能**: プレミアムプラン（月額980円）の課金処理

#### `_advertisement/`

- **対応モデル**: `User.isPremium`フィールド
- **責務**: AdMob広告表示制御
- **主要機能**: 非プレミアムユーザーへの広告表示、同意管理

#### `_startup/`

- **対応モデル**: 複数モデル（初期化時にロード）
- **責務**: アプリ起動時の初期化処理
- **主要機能**: 認証状態確認、設定読み込み、ルーティング制御

#### `_force_update/`

- **対応モデル**: Firebase Remote Config
- **責務**: 強制アップデート機能
- **主要機能**: バージョンチェック、アップデート促進

#### `_app_rate/`

- **対応モデル**: システム設定
- **責務**: アプリストア評価促進
- **主要機能**: レビュー促進ダイアログ表示

### 既存のビジネス機能

#### `account/`

- **対応モデル**: `User`, `UserSettings`
- **責務**: ユーザーアカウント管理
- **主要機能**: プロフィール表示、設定画面

#### `home/`

- **対応モデル**: `RecordItem` + `RecordItemHistory`
- **責務**: ホーム画面とナビゲーション
- **主要機能**: 今日の状況表示、メインナビゲーション

### 新規追加予定のビジネス機能

#### `record_items/`

- **対応モデル**: `RecordItem`
- **責務**: 記録項目の管理（CRUD操作）
- **主要機能**:
  - 記録項目の作成・編集・削除
  - タイトル、説明、単位、アイコン、カラーの設定
  - 表示順序の管理

#### `daily_records/`

- **対応モデル**: `RecordItem` + `RecordItemHistory`
- **責務**: 日々の記録管理
- **主要機能**:
  - 今日の記録項目一覧表示
  - やった/やってないの記録
  - 前日/翌日への移動
  - 記録の追加・削除

#### `calendar/`

- **対応モデル**: `RecordItemHistory` + `RecordItem`
- **責務**: カレンダー表示と詳細
- **主要機能**:
  - 月間カレンダー表示
  - 各日のやったことアイコン表示
  - 特定日の詳細表示
  - やった/やってないの状態変更

#### `record_details/`

- **対応モデル**: `RecordItem` + `RecordItemHistory`
- **責務**: 記録項目の詳細表示と統計
- **主要機能**:
  - 記録項目の詳細情報表示
  - やった日の一覧表示
  - 累計回数・統計情報の表示
  - 履歴の可視化

#### `settings/`

- **対応モデル**: `UserSettings`
- **責務**: アプリ設定とポリシー画面
- **主要機能**:
  - 言語設定（日本語/英語）
  - 通知設定
  - プライバシーポリシー
  - 利用規約
  - 特定商取引法に関する表記
  - お問い合わせフォーム

## データフロー

### 1. 記録項目作成フロー

```
record_items/ → RecordItem作成 → Firestore保存
```

### 2. 日次記録フロー

```
daily_records/ → RecordItemHistory作成 → Firestore保存
```

### 3. カレンダー表示フロー

```
calendar/ → RecordItemHistory読み込み → 日付別グループ化 → 表示
```

### 4. 統計表示フロー

```
record_details/ → RecordItemHistory読み込み → クライアント側集計 → 表示
```

### 5. 設定管理フロー

```
settings/ → UserSettings読み込み/更新 → Firestore保存
```

## アーキテクチャ構成

各フィーチャーはクリーンアーキテクチャに従い、以下の構成を持ちます：

```
features/feature_name/
├── data/           # Repository実装、DTO、データソース
├── domain/         # モデル、エンティティ
├── application/    # ユースケース、ビジネスロジック（Riverpodプロバイダー）
└── presentation/   # UIウィジェット、ページ、コントローラ
```

## 実装優先度

1. **Phase 1**: コア機能
   - `record_items/` - 記録項目管理
   - `daily_records/` - 日次記録

2. **Phase 2**: 表示機能
   - `calendar/` - カレンダー表示
   - `record_details/` - 詳細・統計

3. **Phase 3**: 補完機能
   - `settings/` - 設定・ポリシー画面の充実
